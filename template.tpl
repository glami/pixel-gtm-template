___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "displayName": "GLAMI piXel",
  "description": "GLAMI piXel is the tracking code that unlocks personalization in GLAMI catalogue and assists in delivering better results to e-shops.",
  "categories": [
    "CONVERSION_TRACKING",
    "PERSONALIZATION"
  ],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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\u003d\u003d",
    "displayName": "GLAMI",
    "id": "github.com_glami"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "notSetText": "API key value is mandatory.",
    "help": "Unique identifier",
    "valueValidators": [
      {
        "args": [
          32,
          32
        ],
        "errorMessage": "API must be exactly 32 chars long.",
        "type": "STRING_LENGTH"
      }
    ],
    "displayName": "API key",
    "simpleValueType": true,
    "name": "apiKey",
    "type": "TEXT"
  },
  {
    "help": "Glami domain identifier - ISO 3166-1 alpha-2 code",
    "displayName": "Country code",
    "simpleValueType": true,
    "name": "countryCode",
    "type": "TEXT",
    "notSetText": "Country code value is mandatory."
  },
  {
    "type": "TEXT",
    "name": "consent",
    "displayName": "Cookie consent value",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "DECIMAL",
        "enablingConditions": []
      }
    ],
    "valueHint": "Consent given (1) or not given (0).",
    "help": "User consent to the storage of analytical cookies on their devices. Set 1 in case the user gave permission. Otherwise set 0 for \"no\"."
  },
  {
    "macrosInSelect": false,
    "selectItems": [
      {
        "displayValue": "PageView",
        "value": "PageView"
      },
      {
        "displayValue": "ViewContent",
        "value": "ViewContent"
      },
      {
        "value": "AddToCart",
        "displayValue": "AddToCart"
      },
      {
        "value": "Transaction",
        "displayValue": "Transaction"
      }
    ],
    "displayName": "Track type",
    "defaultValue": "PageView",
    "simpleValueType": true,
    "name": "trackType",
    "type": "SELECT"
  },
  {
    "displayName": "Transaction variables",
    "name": "transaction",
    "groupStyle": "ZIPPY_OPEN",
    "type": "GROUP",
    "subParams": [
      {
        "displayName": "Values of transaction variables are usually provided using dataLayer.",
        "name": "TransactionVariablesGroupTitle",
        "type": "LABEL"
      },
      {
        "help": "Unique transaction identifier",
        "displayName": "Transaction ID",
        "simpleValueType": true,
        "name": "transactionId",
        "type": "TEXT"
      },
      {
        "help": "Order total value",
        "displayName": "Order value",
        "simpleValueType": true,
        "name": "orderValue",
        "type": "TEXT"
      },
      {
        "help": "ISO 4217 currency code (EUR, USD, CZK)",
        "displayName": "Order currency",
        "simpleValueType": true,
        "name": "currency",
        "type": "TEXT"
      },
      {
        "help": "Names of bought products. Multiple values are separated by comma (,). Preferably use the same names as in your Glami product feed.",
        "displayName": "Product names",
        "simpleValueType": true,
        "name": "productNames",
        "type": "TEXT"
      },
      {
        "help": "IDs of bought products. Multiple values are separated by comma (,). Preferably use the same IDs as in your Glami product feed.",
        "displayName": "Product IDs",
        "simpleValueType": true,
        "name": "productIds",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "trackType",
        "paramValue": "Transaction",
        "type": "EQUALS"
      }
    ]
  },
  {
    "displayName": "AddToCart variables",
    "name": "AddToCartVariablesGrouptransaction",
    "groupStyle": "ZIPPY_OPEN",
    "type": "GROUP",
    "subParams": [
      {
        "displayName": "Values of AddToCart variables are usually provided using dataLayer.",
        "name": "addToCartVariablesGroupTitle",
        "type": "LABEL"
      },
      {
        "help": "IDs of products added into cart. Multiple values are separated by comma (,). Preferably use the same IDs as in your Glami product feed.",
        "displayName": "Product IDs",
        "simpleValueType": true,
        "name": "addToCartProductIds",
        "type": "TEXT"
      },
      {
        "help": "Names of products added into cart. Multiple values are separated by comma (,). Preferably use the same names as in your Glami product feed.",
        "displayName": "Product names",
        "simpleValueType": true,
        "name": "addToCartProductNames",
        "type": "TEXT"
      },
      {
        "help": "Product price",
        "displayName": "Product price (optional)",
        "simpleValueType": true,
        "name": "addToCartProductPrice",
        "type": "TEXT"
      },
      {
        "help": "ISO 4217 currency code (EUR, USD, CZK)",
        "displayName": "Product price currency (optional)",
        "simpleValueType": true,
        "name": "addToCartCurrency",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "trackType",
        "paramValue": "AddToCart",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ViewContentVariablesGroup",
    "displayName": "ViewContent variables",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "LABEL",
        "name": "ViewContentVariablesGroupTitle",
        "displayName": "Values of ViewContent variables are usually provided using dataLayer."
      },
      {
        "type": "SELECT",
        "name": "contentType",
        "displayName": "Content type",
        "selectItems": [
          {
            "value": "product",
            "displayValue": "Product"
          },
          {
            "value": "category",
            "displayValue": "Category"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "product"
      },
      {
        "type": "TEXT",
        "name": "viewContentProductIds",
        "displayName": "Product IDs",
        "simpleValueType": true,
        "help": "IDs of viewed products. Multiple values are separated by comma (,). Preferably use the same IDs as in your Glami product feed."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "trackType",
        "paramValue": "ViewContent",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const log = require('logToConsole');
const set = require('setInWindow');
const createArgumentsQueue = require('createArgumentsQueue');
const getType = require('getType');
const makeInteger = require('makeInteger');

let glamiObject = function () {
  createArgumentsQueue('glami', 'glamiObject.q');
};

set('GlamiTrackerObject', 'glami');
set('glami', glamiObject);

const onSuccess = function () {
  
  let consent = 1;
  if (data.consent !== undefined && makeInteger(data.consent) === 0) {
    consent = 0;
  }
  
  callInWindow('glami', 'create', data.apiKey, data.countryCode, null, {source: 'gtm', consent: consent});
  
  if (data.trackType === 'PageView') {
  	callInWindow('glami', 'track', 'PageView');  
  }
  
  if (data.trackType === 'Transaction') {
    let eventValues = {};
    if (data.orderValue) {
        eventValues.value = data.orderValue;
    }
    if (data.currency) {
        eventValues.currency = data.currency;
    }
    if (data.productNames) {
		if (getType(data.productNames) === 'array') {
          	eventValues.product_names = data.productNames;
        } else {
			eventValues.product_names = stringToArray(data.productNames);
        }
    }
    // transaction products
    if (data.productIds) {
        if (getType(data.productIds) === 'array') {
			eventValues.item_ids = data.productIds;
        } else {
			eventValues.item_ids = stringToArray(data.productIds);
        }
    }
    
    if (data.transactionId) {
        eventValues.transaction_id = data.transactionId;
    }
    
  	callInWindow('glami', 'track', 'Purchase', eventValues);
  }
  
  if (data.trackType === 'ViewContent') {
    let eventValues = {};
    
    if (data.contentType) {
        eventValues.content_type = data.contentType;
    }
    
    // view content products
    if (data.viewContentProductIds) {
        if (getType(data.viewContentProductIds) === 'array') {
			eventValues.item_ids = data.viewContentProductIds;
        } else {
			eventValues.item_ids = stringToArray(data.viewContentProductIds);
        }
    }
    
    callInWindow('glami', 'track', 'ViewContent', eventValues);
  }
  
  if (data.trackType === 'AddToCart') {
    let eventValues = {};
    
    // add to cart products
    if (data.addToCartProductIds) {
        if (getType(data.addToCartProductIds) === 'array') {
			eventValues.item_ids = data.addToCartProductIds;
        } else {
			eventValues.item_ids = stringToArray(data.addToCartProductIds);
        }
    }
    
    if (data.addToCartProductPrice) {
        eventValues.value = data.addToCartProductPrice;
    }
    if (data.addToCartCurrency) {
        eventValues.currency = data.addToCartCurrency;
    }
    if (data.addToCartProductNames) {
		if (getType(data.addToCartProductNames) === 'array') {
          	eventValues.product_names = data.addToCartProductNames;
        } else {
			eventValues.product_names = stringToArray(data.addToCartProductNames);
        }
    }
    
    callInWindow('glami', 'track', 'AddToCart', eventValues);
  }
    
  
  data.gtmOnSuccess();
};

const onFailure = function () {
  log('Error loading Glami pixel code.');
  
  data.gtmOnFailure();
};

// removes falsy values from array
const stringToArray = function (strValue) {
  return ('' + strValue).split(',').map(function(el) { return el.trim(); }).filter(function(el) { return el; });
};

injectScript('https://glamipixel.com/js/compiled/pt.js', onSuccess, onFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "glami"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "GlamiTrackerObject"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "glami.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://glamipixel.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 04/09/2019, 08:31:19


